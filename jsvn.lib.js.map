{"version":3,"sources":["symbols.js","Pointer.js","$$.js","nameModificator.js","styleParsers.js","SourceNode.js","View.js","index.js"],"names":["SOURCE","Symbol","TEXT","Pointer","types","type","value","constructor","Error","Object","values","includes","CLASS_IMPORT","BASE_NODE","$$","args","Array","isArray","name","endsWith","base","symbols","trim","defineProperty","get","__","import","className","arrayFrom","jsvn","jsman_$$","mapFrom","nodeName","toKebab","str","replace","toLowerCase","it","parentSelector","key","slice","styleNodeBodyParser","css","selector","viewName","keys","childs","styleNodeParser","styles","content","entries","keyType","classNamesIndex","ERROR_TOP_PROPS","SourceNode","tagName","cssReceiver","rootName","parentData","baseViewName","render","envs","list","renderedNodes","itemEnv","renderedNode","push","children","basePointer","length","indexOf","findIndex","b","child","newEnv","lambda","renderedChildren","rendered","component","props","View","params","paramName","events","style","styleName","classes","baseItem","baseNode","startsWith","console","warn","baseViewClass","bases","reverse","result","isRootNode","subclasses","getValue","setValue","env","e","target","toUpperCase","parser","childCSS","getCSS","v","childNode","decorator","param","new"],"mappings":"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","file":"jsvn.lib.js","sourceRoot":"src","sourcesContent":["export default {\r\n\tSOURCE : Symbol(),\r\n\tTEXT   : Symbol(),\r\n};","export default class Pointer {\r\n\tstatic #types = {\r\n\t\tCLASS_IMPORT : Symbol(),\r\n\t\tBASE_NODE    : Symbol()\r\n\t};\r\n\tstatic get types() { return this.#types; }\r\n\r\n\t#type;\r\n\t#value;\r\n\r\n\tget type()  { return this.#type; }\r\n\tget value() { return this.#value; }\r\n\r\n\tconstructor(value, type) {\r\n\t\tif (!value || typeof value !== 'string') throw new Error('[JSVN] Pointer incorrect value. Must be not empty string.');\r\n\t\tthis.#value = value;\r\n\r\n\t\tif (Object.values(Pointer.#types).includes(type)) this.#type = type;\r\n\t\telse throw new Error('[JSVN] Pointer incorrect type. Must be one of \"Pointer.types\".');\r\n\t}\r\n}","import jsman_$$ from 'jsman';\r\nimport symbols from './symbols.js';\r\nimport Pointer from './Pointer.js';\r\n\r\nfunction $$ (...args) {\r\n\t//Node with/out base\r\n\tif (Array.isArray(args[0]) && typeof args[0][0] === 'string') {\r\n\t\tconst name = args[0][0];\r\n\r\n\t\tif (name.endsWith(' ')) {\r\n\t\t\treturn (...base) => jsman_$$({ type: symbols.SOURCE, name: name.trim(), base });\r\n\t\t} else {\r\n\t\t\treturn jsman_$$({ type: symbols.SOURCE, name });\r\n\t\t}\r\n\t}\r\n\r\n\treturn jsman_$$(args);\r\n}\r\n\r\nObject.defineProperty($$, 'text', {\r\n\tget () { return jsman_$$({ type: symbols.TEXT }); },\r\n});\r\n$$.__ = base => {\r\n\tif (Array.isArray(base) && typeof base[0] === 'string') base = base[0];\r\n\tif (!base || typeof base !== 'string') throw new Error('[JSVN] Incorrect base name.');\r\n\treturn new Pointer(base, Pointer.types.BASE_NODE);\r\n};\r\n\r\n$$.import = className => {\r\n\tif (!className || typeof className !== 'string') throw new Error('[JSVN] Incorrect imported className.');\r\n\treturn new Pointer(className, Pointer.types.CLASS_IMPORT);\r\n};\r\n\r\n$$.arrayFrom = jsvn => jsman_$$.arrayFrom(jsvn);\r\n$$.mapFrom   = jsvn => jsman_$$.mapFrom(jsvn);\r\n\r\nexport default $$;","export default nodeName=>/*(this.#rootName?(this.#rootName+'__'):'')*/ 'jsvn_' + nodeName;","import nameModificator from './nameModificator.js';\r\n\r\nconst toKebab = str=>str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n\r\nconst types = {\r\n\t'.' : it=>it.parentSelector + '>.' + nameModificator(it.key.slice(1)),\r\n\t':' : it=>it.parentSelector + it.key,\r\n};\r\n\r\nexport default function styleNodeBodyParser (css, key, value, selector, viewName) {\r\n\r\n\r\n\tif (typeof key === 'string') {\r\n\t\t//child\r\n\t\tif(Object.keys(types).includes(key[0])) {\r\n\t\t\tcss.childs += styleNodeParser(key, value, selector, viewName);\r\n\t\t\treturn key[0]==='.'?key.slice(1):true;\r\n\t\t}\r\n\r\n\t\t//style\r\n\t\tif (typeof value === 'string') {\r\n\t\t\tcss.styles += '\\t' + toKebab(key) + ': ' + value + ';\\n';\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction styleNodeParser (key, content, parentSelector = null, viewName = null) {\r\n\tlet selector;\r\n\r\n\tconst type = types[key[0]];\r\n\tif (type) selector = type({key, content, parentSelector, viewName});\r\n\telse throw new Error('[JSVN] Unknown selector type.');\r\n\r\n\tconst css = {\r\n\t\tstyles: '',\r\n\t\tchilds: '',\r\n\t};\r\n\r\n\tfor (let [key, value] of Object.entries(content)) {\r\n\t\tif (!styleNodeBodyParser(css, key, value)) {\r\n\t\t\tconst keyType = typeof key;\r\n\t\t\tthrow new Error(`[JSVN] Incorrect key (${keyType}) '${keyType === 'string' ? key : '*'}' of node`);\r\n\t\t}\r\n\t}\r\n\r\n\treturn [selector + ' {\\n'+css.styles+'}\\n\\n' + css.childs];\r\n}","import styleParsers from './styleParsers.js';\r\nimport symbols from './symbols.js';\r\nimport Pointer from './Pointer.js';\r\nimport $$ from './$$.js'\r\nimport nameModificator from './nameModificator.js';\r\n\r\nlet classNamesIndex = 0;\r\n\r\nconst ERROR_TOP_PROPS = className=> `[JSVN] Node \"${className}\" has a render operator or env modifier, main node must not have \"__IF\", \"__EACH\" or '__env' properties.`;\r\n\r\nexport default class SourceNode {\r\n\t#classId   = classNamesIndex++;\r\n\t#nodeName = null;\r\n\r\n\t#tagName   = 'div';\r\n\t#preset    = {};\r\n\t#params    = {};\r\n\t#inline    = {};\r\n\t#events    = {};\r\n\t#condition = null;\r\n\t#repeatFor = null;\r\n\t#envMod    = null;\r\n\r\n\t#envVals = {};\r\n\t#envGens = {};\r\n\r\n\t#classes  = [];\r\n\t#children = [];\r\n\r\n\t#rootName = null;\r\n\r\n\tget tagName   () { return this.#tagName;   }\r\n\tget className () { return nameModificator(this.#nodeName); }\r\n\tget viewName  () { return this.#rootName || this.#nodeName; }\r\n\r\n\tconstructor (cssReceiver = null, content = null, base = null, name = null, parentSelector = null, rootName = null, parentData = null) {\r\n\t\tif (!cssReceiver) return;\r\n\r\n\t\tthis.#rootName = rootName;\r\n\t\tif (this.#rootName) this.#nodeName = name || 'node' + this.#classId;\r\n\t\telse                this.#nodeName = name || 'View' + this.#classId;\r\n\r\n\t\tconst baseViewName = base && this.#parseBases(base, parentData);\r\n\r\n\t\tlet selector = '.' + this.className;\r\n\t\tif (parentSelector) selector = parentSelector + '>' + selector;\r\n\r\n\r\n\t\tlet css = { styles: '', childs: '' };\r\n\r\n\t\tif (content) this.#parseContent(css, content, selector, !parentSelector, baseViewName);\r\n\r\n\t\tcss = selector + ' {\\n'+css.styles+'}\\n\\n' + css.childs;\r\n\t\tif (cssReceiver && typeof cssReceiver === 'function') cssReceiver(css, this.className);\r\n\t}\r\n\r\n\trender (render, ...envs) {\r\n\t\tif (this.#condition && !this.#condition(...envs)) return null;\r\n\r\n\t\tif (this.#repeatFor) {\r\n\t\t\tconst list = this.#repeatFor(...envs);\r\n\t\t\tconst renderedNodes = [];\r\n\t\t\tif (Array.isArray(list)) {\r\n\t\t\t\tfor (const itemEnv of list) {\r\n\t\t\t\t\tconst renderedNode = this.#renderOnce(render, itemEnv, ...envs);\r\n\t\t\t\t\trenderedNodes.push(renderedNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn renderedNodes;\r\n\t\t} else {\r\n\t\t\treturn  this.#renderOnce(render, ...envs);\r\n\t\t}\r\n\t}\r\n\r\n\t#renderOnce (render, ...envs) {\r\n\t\tif (this.#envMod) {\r\n\t\t\tif (typeof this.#envMod === 'function') envs[0] = this.#envMod(...envs);\r\n\t\t\telse envs[0] = this.#envMod;\r\n\t\t} else {\r\n\t\t\tlet newEnv = null;\r\n\t\t\tfor (const [key, value] of Object.entries(this.#envVals)) {\r\n\t\t\t\tif (!newEnv) newEnv = {};\r\n\t\t\t\tnewEnv[key] = value;\r\n\t\t\t}\r\n\t\t\tfor (const [key, lambda] of Object.entries(this.#envGens)) {\r\n\t\t\t\tif (!newEnv) newEnv = {};\r\n\t\t\t\tnewEnv[key] = lambda(...envs);\r\n\t\t\t}\r\n\t\t\tif (newEnv) {\r\n\t\t\t\tif (typeof envs[0] === 'object') envs[0] = { ...envs[0], ...newEnv };\r\n\t\t\t\telse envs[0] = newEnv;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet renderedChildren = null;\r\n\t\tif (this.#children) {\r\n\t\t\trenderedChildren = [];\r\n\t\t\tfor (const child of this.#children) {\r\n\t\t\t\tlet rendered = child;\r\n\r\n\t\t\t\tif      (child instanceof SourceNode) rendered = child.render(render, ...envs);\r\n\t\t\t\telse if (typeof child === 'function') rendered = child(...envs);\r\n\t\t\t\telse if (Array.isArray(child)) {\r\n\t\t\t\t\tconst [component, props] = child;\r\n\t\t\t\t\tif (component instanceof $$.View) rendered = component.render(props(...envs));\r\n\t\t\t\t\telse if (typeof component === 'function') rendered = component(props(...envs));\r\n\t\t\t\t\telse throw new Error(`[JSVN] Unknown child type: \"${typeof component}\"`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (Array.isArray(rendered)) {\r\n\t\t\t\t\tfor (const renderedNode of rendered) renderedChildren.push(renderedNode)\r\n\t\t\t\t} else {\r\n\t\t\t\t\trenderedChildren.push(rendered);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst params = { ...this.#preset };\r\n\t\tfor (const [paramName, lambda] of Object.entries(this.#params)) params[paramName] = lambda(...envs);\r\n\r\n\t\tconst events = {};\r\n\t\tfor (const [paramName, lambda] of Object.entries(this.#events)) events[paramName] = lambda(...envs);\r\n\r\n\t\tconst style = {};\r\n\t\tfor (const [styleName, lambda] of Object.entries(this.#inline)) style[styleName] = lambda(...envs);\r\n\r\n\t\tconst classes = [...this.#classes, this.className];\r\n\r\n\t\treturn render(this.#tagName, classes, params, style, events, renderedChildren);\r\n\t}\r\n\r\n\t#parseBaseItem (baseItem, baseNode, parentData) {\r\n\t\tif (typeof baseItem === 'string') {\r\n\t\t\tif (baseItem.startsWith('<>')) {\r\n\t\t\t\tthis.#tagName = baseItem.slice(2);\r\n\t\t\t} else if (baseItem.startsWith('/')) {\r\n\t\t\t\tthis.#tagName = baseItem.slice(1);\r\n\t\t\t\tthis.#children = null;\r\n\t\t\t} else if (baseItem.startsWith('.')) {\r\n\t\t\t\tthis.#classes.push(baseItem.slice(1));\r\n\t\t\t\tconsole.warn(`[JSVN] Warning: node \"${this.className}\" is based on the global class \"${baseItem}\" without \"$$.import()\". The concise style of inheriting global styles is unsafe and may change in the future.`);\r\n\t\t\t} else {\r\n\t\t\t\tthis.#classes.push(nameModificator(baseItem));\r\n\t\t\t\t/*if (parentData) {\r\n\t\t\t\t\tif (parentData.subclasses.includes(baseItem)) {\r\n\t\t\t\t\t\tthis.#classes.push((this.#rootName + '__' + baseItem));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.#classes.push((parentData.baseViewName + '__' + baseItem));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else throw new Error(`[JSVN] Root node of \"${this.className}\" cannot be based on local classes, import class \"${baseItem}\" before using.`);*/\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (baseItem) {\r\n\t\t\tif (baseItem instanceof SourceNode) {\r\n\t\t\t\tif (baseNode) throw new Error(`[JSVN] Node is based on multiple views: \"${baseNode.className}\", \"${baseItem.className}\". Multiple inheritance is not allowed.`);\r\n\t\t\t\tbaseNode = baseItem;\r\n\t\t\t\tthis.#tagName = baseNode.tagName;\r\n\t\t\t\tfor (const baseViewClass of baseNode.#classes) {\r\n\t\t\t\t\tthis.#classes.push(baseViewClass);\r\n\t\t\t\t}\r\n\t\t\t\tthis.#classes.push(baseNode.className);\r\n\r\n\t\t\t\treturn baseNode;\r\n\t\t\t}\r\n\r\n\t\t\tif (baseItem instanceof Pointer) {\r\n\t\t\t\tif (baseItem.type === Pointer.types.BASE_NODE) throw new Error(`[JSVN] Base node named \"${baseItem.value}\" was not found in the base View.`);\r\n\t\t\t\tif (baseItem.type === Pointer.types.CLASS_IMPORT) this.#classes.push(baseItem.value);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (baseItem === $$.__) throw new Error(`[JSVN] Base node named \"${this.#nodeName}\" was not found in the parent node of the base View.`);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\t#parseBases (bases, parentData) {\r\n\t\tbases.reverse();\r\n\r\n\t\tlet baseNode = null;\r\n\t\tfor (let baseItem of bases) {\r\n\t\t\tconst result = this.#parseBaseItem(baseItem, baseNode, parentData);\r\n\t\t\tif (result instanceof SourceNode) baseNode = result;\r\n\t\t\tif (!result) throw new Error('[JSVN] Node base must be string, import, base child or View.');\r\n\t\t}\r\n\r\n\t\tif (baseNode) {\r\n\t\t\tthis.#basedOn(baseNode);\r\n\t\t\treturn baseNode.viewName;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t#basedOn (baseNode) {\r\n\t\tthis.#preset  = { ...baseNode.#preset };\r\n\t\tthis.#params  = { ...baseNode.#params };\r\n\t\tthis.#inline  = { ...baseNode.#inline };\r\n\t\tthis.#events  = { ...baseNode.#events };\r\n\t\tthis.#envGens = { ...baseNode.#envGens };\r\n\t\tthis.#envVals = { ...baseNode.#envVals };\r\n\r\n\t\tthis.#condition = baseNode.#condition;\r\n\t\tthis.#repeatFor = baseNode.#repeatFor;\r\n\t\tthis.#envMod    = baseNode.#envMod;\r\n\r\n\t\tif (this.#children && baseNode.#children) this.#children  = [ ...baseNode.#children ];\r\n\t}\r\n\r\n\t#parseBodyItem (css, key, value, selector, isRootNode, subclasses, baseViewName) {\r\n\t\t//sys param\r\n\t\tif (typeof key === 'string') {\r\n\t\t\tif (key.startsWith('__')) {\r\n\t\t\t\tkey = key.slice(2);\r\n\t\t\t\tif (typeof value === 'function') {\r\n\t\t\t\t\tif (key === 'IF')   {\r\n\t\t\t\t\t\tif (isRootNode) throw new Error(ERROR_TOP_PROPS(this.className));\r\n\t\t\t\t\t\tthis.#condition = value;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key === 'EACH') {\r\n\t\t\t\t\t\tif (isRootNode) throw new Error(ERROR_TOP_PROPS(this.className));\r\n\t\t\t\t\t\tthis.#repeatFor = value;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (key === 'env') {\r\n\t\t\t\t\tif (isRootNode) throw new Error(ERROR_TOP_PROPS(this.className));\r\n\t\t\t\t\tif (this.#envGens.length || this.#envVals.length) throw new Error('[JSVN] Mixed use of __env and environment parameters (_*) is not allowed.');\r\n\t\t\t\t\tthis.#envMod = value;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (key === 'bind') {\r\n\t\t\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\t\t\tconst [getValue, setValue] = value;\r\n\r\n\t\t\t\t\t\tthis.#params['value']  = getValue;\r\n\t\t\t\t\t\tthis.#events['change'] = env => e => setValue(env)(e.target.value);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof value === 'string') {\r\n\t\t\t\t\t\tconst setValue = 'set' + value[0].toUpperCase() + value.slice(1);\r\n\r\n\t\t\t\t\t\tthis.#params['value']  = env => env[value] || '';\r\n\t\t\t\t\t\tthis.#events['change'] = env => e => env[setValue](e.target.value);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (key.startsWith('on') && typeof value === 'function') {\r\n\t\t\t\t\tthis.#events[key.slice(2)] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (key.startsWith('$')) {\r\n\t\t\t\tif (typeof value === 'function') {\r\n\t\t\t\t\tthis.#params[key.slice(1)] = value;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.#preset[key.slice(1)] = value;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (key.startsWith('_')) {\r\n\t\t\t\tif (this.#envMod) throw new Error('[JSVN] Mixed use of __env and environment parameters (_*) is not allowed.');\r\n\r\n\t\t\t\tif (typeof value === 'function') {\r\n\t\t\t\t\tthis.#envGens[key.slice(1)] = value;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.#envVals[key.slice(1)] = value;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//styleNodeParsers\r\n\t\tconst parser = styleParsers(css, key, value, selector, this.viewName);\r\n\t\tif (parser) {\r\n\t\t\tif (typeof parser === 'string') subclasses.push(parser);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t//inline style\r\n\t\tif (typeof key === 'string' && typeof value === 'function') {\r\n\t\t\tthis.#inline[key] = value;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (Array.isArray(key)) {\r\n\t\t\t//view / custom component\r\n\t\t\tif(typeof value === 'function') {\r\n\t\t\t\tthis.#children.push([key[0], value]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t//base\r\n\t\t\tkey = { type: symbols.SOURCE, base: key }\r\n\t\t}\r\n\r\n\t\tif (typeof key === 'object') {\r\n\t\t\tif (key.type === symbols.TEXT) {\r\n\t\t\t\tthis.#children.push(value);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (key.type === symbols.SOURCE) { //sourceNode\r\n\t\t\t\tif (this.#children) {\r\n\t\t\t\t\tlet basePointer = SourceNode.#getBaseIndex(key, this.#children);\r\n\r\n\t\t\t\t\tlet childCSS;\r\n\t\t\t\t\tconst getCSS = v => childCSS = v;\r\n\t\t\t\t\tif (basePointer >= 0) key.base.push(this.#children[basePointer]);\r\n\t\t\t\t\tconst childNode = new SourceNode(\r\n\t\t\t\t\t\tgetCSS, value, key.base, key.name,\r\n\t\t\t\t\t\tselector, this.viewName,\r\n\t\t\t\t\t\t{ subclasses, baseViewName },\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (basePointer >= 0) this.#children[basePointer] = childNode;\r\n\t\t\t\t\telse this.#children.push(childNode);\r\n\r\n\t\t\t\t\tif (childCSS) css.childs += childCSS;\r\n\t\t\t\t} else throw new Error('[JSVN] Child node in self-closing tag. Self-closing tag must not have children');\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//ERROR\r\n\t\treturn false;\r\n\t}\r\n\r\n\t#parseContent (css, content, selector, isRootNode, baseViewName) {\r\n\t\tconst subclasses = [];\r\n\t\tfor (let [key, value] of content) {\r\n\t\t\tif (!this.#parseBodyItem(css, key, value, selector, isRootNode, subclasses, baseViewName)) {\r\n\t\t\t\tconst keyType = typeof key;\r\n\t\t\t\tthrow new Error(`[JSVN] Incorrect key (${keyType}) '${keyType === 'string' ? key : '*'}' of node '${this.className}'`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//Utils\r\n\tstatic #getBaseIndex (key, children) {\r\n\t\tlet basePointer = null;\r\n\t\tif (key.base) {\r\n\t\t\tif (!key.base.length) basePointer = key.name;\r\n\t\t\telse {\r\n\t\t\t\tbasePointer = key.base.indexOf($$.__);\r\n\t\t\t\tif (basePointer >= 0) {\r\n\t\t\t\t\tdelete key.base[basePointer];\r\n\t\t\t\t\tbasePointer = key.name;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbasePointer = key.base.findIndex(b=>b instanceof Pointer && b.type === Pointer.types.BASE_NODE);\r\n\t\t\t\t\tif (basePointer >= 0) {\r\n\t\t\t\t\t\tdelete key.base[basePointer];\r\n\t\t\t\t\t\tbasePointer = key.name;\r\n\t\t\t\t\t} else basePointer = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (basePointer) basePointer = children.findIndex(child=>{\r\n\t\t\tif (child instanceof SourceNode) return child.#nodeName === basePointer;\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\telse return -1;\r\n\r\n\t\treturn basePointer;\r\n\t}\r\n}","import $$ from './$$.js';\r\nimport SourceNode from './SourceNode.js';\r\n\r\nexport class View extends SourceNode {\r\n\tstatic get decorator () { return null; }\r\n\r\n\t#render;\r\n\r\n\tconstructor(...params) {\r\n\t\tlet content = null,\r\n\t\t\tname    = null,\r\n\t\t\tbase    = null;\r\n\r\n\t\tfor (const param of params) {\r\n\t\t\tif (typeof param === 'string') name = param;\r\n\t\t\telse if (Array.isArray(param)) base = param;\r\n\t\t\telse content = param;\r\n\t\t}\r\n\r\n\t\tif (!content) throw new Error('[JSVN] The View must have at least an argument with jsvn-content.');\r\n\t\tcontent = $$.arrayFrom(content);\r\n\r\n\t\tif (!new.target.render || !new.target.styles) throw new Error('[JSVN] The View inheritor must have static \"render\" and \"styles\" methods.');\r\n\r\n\t\tsuper(\r\n\t\t\tnew.target.styles,\r\n\t\t\tcontent,\r\n\t\t\tbase,\r\n\t\t\tname,\r\n\t\t);\r\n\r\n\t\tthis.#render = new.target.render;\r\n\t}\r\n\r\n\trender(...envs) {\r\n\t\treturn super.render(this.#render, ...envs);\r\n\t}\r\n}","import $$ from './$$.js';\r\nimport { View } from './View.js';\r\n\r\n$$.View = View;\r\n\r\nexport default $$;"]}